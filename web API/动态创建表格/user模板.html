<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/user.css">
</head>

<body>
    <h1>æ–°å¢å­¦å‘˜</h1>
    <div class="info">
        å§“åï¼š<input type="text" class="uname"> å¹´é¾„ï¼š
        <input type="text" class="age"> æ€§åˆ«: <select name="gender" id="" class="gender">
      <option value="ç”·">ç”·</option>
      <option value="å¥³">å¥³</option>
    </select> è–ªèµ„ï¼š
        <input type="text" class="salary"> å°±ä¸šåŸå¸‚ï¼š
        <select name="city" id="" class="city">
      <option value="åŒ—äº¬">åŒ—äº¬</option>
      <option value="ä¸Šæµ·">ä¸Šæµ·</option>
      <option value="å¹¿å·">å¹¿å·</option>
      <option value="æ·±åœ³">æ·±åœ³</option>
      <option value="æ›¹å¿">æ›¹å¿</option>

    </select>
        <button class="add">å½•å…¥</button>
    </div>

    <h1>å°±ä¸šæ¦œ</h1>
    <table>
        <thead>
            <tr>
                <th>å­¦å·</th>
                <th>å§“å</th>
                <th>å¹´é¾„</th>
                <th>æ€§åˆ«</th>
                <th>è–ªèµ„</th>
                <th>å°±ä¸šåŸå¸‚</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            <!--  <tr>
                <td>1001</td>
                <td>æ¬§é˜³éœ¸å¤©</td>
                <td>19</td>
                <td>ç”·</td>

                <td>15000</td>
                <td>ä¸Šæµ·</td>
                <td>
                    <a href="javascript:">åˆ é™¤</a>
                </td>
            </tr> -->
        </tbody>
    </table>
    <script>
        //  1. å‡†å¤‡å¥½æ•°æ®åç«¯çš„æ•°æ®
        let arr = [{
            stuId: 1001,
            uname: 'æ¬§é˜³éœ¸å¤©',
            age: 19,
            gender: 'ç”·',
            salary: '20000',
            city: 'ä¸Šæµ·'
        }, {
            stuId: 1002,
            uname: 'ä»¤ç‹éœ¸å¤©',
            age: 29,
            gender: 'ç”·',
            salary: '30000',
            city: 'åŒ—äº¬'
        }, {
            stuId: 1003,
            uname: 'è¯¸è‘›éœ¸å¤©',
            age: 39,
            gender: 'ç”·',
            salary: '2000',
            city: 'åŒ—äº¬'
        }, ]


        //æ¸²æŸ“åŸæœ‰çš„æ•°æ®åˆ°é¡µé¢ä¸­  æ·»åŠ éœ€è¦æ¸²æŸ“ åˆ é™¤éœ€è¦æ¸²æŸ“ å¤šæ¬¡æ¸²æŸ“å°è£…æˆå‡½æ•°å°±okäº†

        //æ¸²æŸ“å‡½æ•°
        let tbody = document.querySelector('tbody')

        //ğŸ˜Šæ³¨æ„ï¼šè·å–å„ä¸ªè¡¨å•å…ƒç´  çŸ¥é“ç”¨æˆ·è¾“å…¥äº†ä»€ä¹ˆ  è·å–è¡¨å•æ‰èƒ½æ‹¿åˆ°é‡Œè¾¹çš„å€¼
        let uname = document.querySelector('.uname')
        let age = document.querySelector('.age')
        let gender = document.querySelector('.gender')
        let salary = document.querySelector('.salary')
        let city = document.querySelector('.city')

        function render() {
            //4.å…ˆå¹²æ‰åŸå…ˆçš„æ•°æ® tbodyé‡Œçš„tréƒ½æ²¡æœ‰,å¹²æ‰å®Œæˆä¹‹åå†å»æ¸²æŸ“æœ€æ–°çš„ï¼Œåº•ä¸‹çš„forå°±å¯ä»¥æ‹¿åˆ°æ•°ç»„æœ€æ–°çš„é•¿åº¦
            tbody.innerHTML = ''

            //æ ¹æ®æ•°æ®çš„æ¡æ•°å¢åŠ tr å…ˆçœ‹çœ‹å‡ æ¡æ•°æ® å°±åˆ›å»ºå‡ ä¸ªtr
            for (let i = 0; i < arr.length; i++) {
                //1.åˆ›å»ºtr  document.createElement('æ ‡ç­¾å')
                let tr = document.createElement('tr')
                    //2.tré‡Œè¾¹æ”¾å†…å®¹
                tr.innerHTML = `
              <td>${arr[i].stuId}</td>
                <td>${arr[i].uname}</td>
                <td>${arr[i].age}</td>
                <td>${arr[i].gender}</td>

                <td>${arr[i].salary}</td>
                <td>${arr[i].city}</td>
                <td>
                    <a href="javascript:" id="${i}">åˆ é™¤</a>
                </td>
              `
                    //6.1ğŸ˜Š æœ€åä¸€æ­¥åˆ é™¤æ“ä½œæ¥ä¸Šä¸Šè¾¹çš„idï¼š ç”Ÿæˆliçš„æ—¶å€™ é¡ºä¾¿æœ‰ä¸ªidï¼Œåˆ°æ—¶å€™ä¸€ç‚¹å‡»åˆ é™¤çš„é‚£ä¸ªæŒ‰é’® å¯¹åº”idçš„ç´¢å¼•å·ä¹Ÿèƒ½æ‹¿åˆ°
                    //3.å°†trè¿½åŠ ç»™tbody  æ”¾åˆ°åè¾¹å°±å¯ä»¥ çˆ¶å…ƒç´ .appendChild(æ’å…¥çš„å…ƒç´ )
                tbody.appendChild(tr)

                //4.1 åªè¦å½•å…¥å®Œæˆå å°±å¤åŸæ‰€æœ‰çš„è¡¨å•æ•°æ®
                uname.value = age.value = salary.value = ''
                gender.value = 'ç”·'
                city.value = 'åŒ—äº¬'
            }
        }
        //ğŸ˜Šåˆ«å¿˜äº† è°ƒç”¨å‡½æ•°
        render()


        //ç‚¹å‡» å½•å…¥æŒ‰é’® æ·»åŠ æ•°æ®
        let add = document.querySelector('.add')

        add.addEventListener('click', function() {
            //å…ˆè·å¾—è¡¨å•é‡Œçš„å€¼å¾€æ•°ç»„æ·»åŠ æ•°æ®ç”¨push()æ–¹æ³•  ç„¶åæŠŠå€¼æ¢æˆçœŸæ˜¯æ•°æ®
            arr.push({
                    //IDå°±æ˜¯æ•°ç»„å…ƒç´ çš„æœ€åä¸€ä¸ª+1 æ•°ç»„å…ƒç´ çš„æœ€åä¸€ä¸ªå°±æ˜¯arr.length ç´¢å¼•å·æ˜¯  arr[arr.length-1]
                    stuId: arr[arr.length - 1].stuId + 1,
                    uname: uname.value,
                    age: age.value,
                    gender: gender.value,
                    salary: salary.value,
                    city: city.value
                })
                // console.log(arr);
                //4.3é‡æ–°æ¸²æŸ“å‡½æ•°  ä¸€ç‚¹å‡»å½•å…¥å°±æ¸²æŸ“å‡½æ•°
            render()
        })

        //åˆ é™¤æ“ä½œ åˆ é™¤çš„ä¹Ÿæ˜¯æ•°ç»„é‡Œçš„æ•°æ® ç”¨äº‹ä»¶å§”æ‰˜çš„æ–¹æ³• 
        //(é—®ï¼šä»€ä¹ˆæ—¶å€™ç”¨äº‹ä»¶å§”æ‰˜å‘¢ï¼Ÿ  ğŸ˜Šç­”ï¼šå¤§æ‰¹é‡åˆ é™¤æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦å¤§è§„æ¨¡æŒ¨ä¸ªæ·»åŠ forå¾ªç¯ ç‚¹å‡»éå†çš„ éƒ½é€‚åˆç”¨äº‹ä»¶å§”æ‰˜)
        tbody.addEventListener('click', function(e) {
            //ç‚¹å‡»äº†a ä¹Ÿå°±æ˜¯åˆ é™¤æŒ‰é’® æ‰ä¼šè¿›è¡Œåˆ é™¤  å¦‚ä½•çŸ¥é“ç‚¹å‡»aäº†å‘¢ï¼Ÿ                    ğŸ˜Šç­”ï¼še.target.tagName ä¼šå¾—åˆ° A å°±æŒ‡çš„æ˜¯aè¿æ¥
            if (e.target.tagName === 'A') {
                //6.åˆ é™¤æ“ä½œ åˆ é™¤çš„æ˜¯æ•°ç»„é‡Œçš„æ•°æ®ï¼Œ ä¸æ˜¯tr
                //å¯é€šè¿‡e.target.id å¯ä»¥å¾—åˆ°å°åºå·
                arr.splice(e.target.id, 1)
                    //é‡æ–°æ¸²æŸ“å‡½æ•°
                render()
            }
        })
    </script>
</body>

</html>